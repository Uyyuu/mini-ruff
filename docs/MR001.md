実装依頼内容

mini-ruff に TODO コメント検出ルールを実装してください。

目的

ソースコード中に残った TODO コメントを検出し、Lint エラーとして報告する。

本ルールは mini-ruff の最初の Lint ルール実装として、シンプルで読みやすい実装にすることを優先する。

ルール仕様
ルールID
MR001

検出対象

以下を含むコメント：

TODO
TODO:

# TODO

# TODO:

※ 大文字 TODO のみ対象（v0.1 では簡易実装）

非対象

todo（小文字）

文字列内の TODO

Docstring 内 TODO（v0.1では未対応でOK）

エラー出力仕様
フォーマット
<file>:<line>:<column> MR001 TODO comment found

例
example.py:10:5 MR001 TODO comment found

実装方針
v0.1 はシンプル実装とする

以下の方針で実装：

まずは source code の文字列スキャンで検出

AST ベース検出は将来対応

可読性優先

過剰な抽象化は禁止

実装要件

1. Rule Trait 実装

以下の Rule trait に従う：

pub trait Rule {
fn id(&self) -> &'static str;
fn check(&self, ctx: &LintContext) -> Vec<Diagnostic>;
}

2. TodoRule 実装

新規作成：

src/lint/rules/todo.rs

3. 実装内容

以下を実装する：

source code を行単位で走査

TODO を含む行を検出

Diagnostic を生成

4. Diagnostic 情報

必須：

rule_id = "MR001"

message = "TODO comment found"

line = 検出行

column = TODO の開始位置

5. Rule Engine 登録

TodoRule を Rule Engine に登録する。

LintContext 利用

以下を利用：

ctx.source

AST は v0.1 では使用不要。

テスト要件

以下のケースを追加：

正常ケース
print("hello")

→ Diagnostic なし

検出ケース

# TODO fix this

→ Diagnostic あり

複数検出

# TODO a

# TODO b

→ 2件検出

非機能要件

パニック禁止

unwrap 最小限

anyhow / Result でエラー管理

実装スタイル

可読性優先

コメント適度に追加

複雑な抽象化禁止

trait object 使用はOK

将来拡張（実装不要）

ASTベースコメント検出

lowercase todo 対応

autofix（削除提案）

追加で入れると良い一文（超おすすめ）

最後にこれを入れてください：

実装は学習目的のため、最小限かつ読みやすいコードを優先してください。
パフォーマンス最適化は不要です。
